diff -uNr xserver690/xc/lib/X11/XlibAsync.c nx-libs/nx-X11/lib/X11/XlibAsync.c
--- xserver690/xc/lib/X11/XlibAsync.c	2005-05-14 00:53:44.000000000 +0200
+++ nx-libs/nx-X11/lib/X11/XlibAsync.c	2015-06-10 21:19:38.523211655 +0200
@@ -27,6 +27,23 @@
 
 */
 
+/**************************************************************************/
+/*                                                                        */
+/* Copyright (c) 2001, 2011 NoMachine, http://www.nomachine.com/.         */
+/*                                                                        */
+/* NX-X11, NX protocol compression and NX extensions to this software     */
+/* are copyright of NoMachine. Redistribution and use of the present      */
+/* software is allowed according to terms specified in the file LICENSE   */
+/* which comes in the source distribution.                                */
+/*                                                                        */
+/* Check http://www.nomachine.com/licensing.html for applicability.       */
+/*                                                                        */
+/* NX and NoMachine are trademarks of Medialogic S.p.A.                   */
+/*                                                                        */
+/* All rights reserved.                                                   */
+/*                                                                        */
+/**************************************************************************/
+
 #define NEED_REPLIES
 #ifdef HAVE_CONFIG_H
 #include <config.h>
@@ -122,6 +139,14 @@
      */
     if ((rep->generic.length << 2) > len)
 	_XEatData (dpy, (rep->generic.length << 2) - len);
+#ifdef NX_TRANS_SOCKET
+
+    /*
+     * The original code has provision
+     * for returning already.
+     */
+
+#endif
     _XIOError (dpy);
     return (char *)rep;
 }
